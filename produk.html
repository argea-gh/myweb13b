<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Produk ‚Äî Herbaprima | Solusi Herbal Halal</title>
  <meta name="description" content="Daftar lengkap produk herbal halal Herbaprima: madu premium, minuman sehat, minyak herba, dan perawatan alami." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome (ikon) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-xOoZU6rLm3n3aF4jF7Zx2Zx5K+6RkD9Kz9yZf7q7VqZf7Vx9n5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y5y......" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Ikon website -->
  <link rel="icon" href="https://lh3.googleusercontent.com/d/1xp5ce29F3f-nVa_IEx925L-8YrXXbHo6" type="image/png">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
  <!-- ‚úÖ HEADER (Sticky) -->
  <header class="header sticky">
    <div class="container">
	 <div class="header-inner">
	  <!-- Logo -->
      <a href="index.html" class="logo">
        <img src="https://lh3.googleusercontent.com/d/1xp5ce29F3f-nVa_IEx925L-8YrXXbHo6" alt="Herbaprima Logo" class="logo-img">
      <span class="site-title">Herbaprima</span>
      </a>
	  <!-- Navigation -->
      <nav class="nav-menu" id="navMenu">
        <ul>
          <li><a href="index.html">Beranda</a></li>
          <li><a href="produk.html">Produk</a></li>
          <li><a href="edukasi.html">Edukasi</a></li>
          <li><a href="tentang.html">Tentang</a></li>
          <li><a href="https://wa.me/6282241900467?text=Halo%20Herbaprima%2C%20saya%20mau%20konsultasi%20gratis%20tentang%20produk%20herbal." target="_blank" class="btn-whatsapp btn-header">üü¢ WhatsApp</a></li>
        </ul>
      </nav>

	<!-- ‚úÖ IKON KERANJANG (Kecil, Kanan Atas) -->
        <div class="cart-icon" id="cartAccessBtn">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count" id="cartBadge">0</span>
        </div>

	<!-- ‚úÖ MENU HAMBURGER (mobile) -->
      <button class="hamburger" id="hamburger" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
	 </div>
    </div>
  </header>

  <!-- ‚úÖ HERO KHUSUS PRODUK -->
  <section class="hero-products">
    <div class="container hero-content">
      <h1 class="hero-headline slide-up">Temukan Solusi Herbal Terbaik Anda</h1>
      <p class="hero-subheadline fade-in" style="animation-delay:0.1s;">
        Lebih dari 5.200+ keluarga percaya pada khasiat alami kami ‚Äî aman, halal, dan berizin BPOM.
      </p>
      
      <div class="hero-cta fade-in" style="animation-delay:0.3s;">
        <a href="#recommended" class="btn btn-primary">
          <i class="fas fa-star"></i> Produk Terlaris
        </a>
        <a href="#categories" class="btn btn-outline">
          <i class="fas fa-filter"></i> Jelajahi Semua Kategori
        </a>
      </div>

      <div class="hero-badges fade-in" style="animation-delay:0.5s;">
        <span class="badge">‚úÖ Halal MUI</span>
        <span class="badge">‚úÖ BPOM Terdaftar</span>
        <span class="badge">‚úÖ Edukasi Gratis</span>
      </div>
    </div>
  </section>

  <!-- ‚úÖ PRODUK UNGGULAN -->
  <section id="recommended" class="section products-featured">
    <div class="container">
      <div class="section-header fade-in">
        <h2 class="section-title">‚≠ê Produk Pilihan Pelanggan</h2>
        <p class="section-subtitle">Paling sering dipesan bulan ini</p>
      </div>
      
      <div class="featured-grid">
        <!-- Akan diisi via JavaScript -->
      </div>
    </div>
  </section>

  <!-- ‚úÖ KATEGORI INTERAKTIF -->
  <section id="categories" class="section category-section">
    <div class="container">
      <h2 class="section-title fade-in">üåø Jelajahi Berdasarkan Kebutuhan</h2>
      
      <div class="category-cards">
        <div class="category-card stagger-item slide-up" data-category="Madu Premium">
          <div class="category-icon">
            <i class="fas fa-honey-pot"></i>
          </div>
          <h3>Madu Premium</h3>
          <p>Daya tahan & stamina</p>
          <span class="category-count">(12 produk)</span>
        </div>
        
        <div class="category-card stagger-item slide-up" data-category="Minuman Sehat">
          <div class="category-icon">
            <i class="fas fa-blender"></i>
          </div>
          <h3>Minuman Sehat</h3>
          <p>Rutinitas harian</p>
          <span class="category-count">(8 produk)</span>
        </div>
        
        <div class="category-card stagger-item slide-up" data-category="Minyak Herba">
          <div class="category-icon">
            <i class="fas fa-oil-can"></i>
          </div>
          <h3>Minyak Herba</h3>
          <p>Perawatan alami</p>
          <span class="category-count">(6 produk)</span>
        </div>
        
        <div class="category-card stagger-item slide-up" data-category="Aneka Herbal">
          <div class="category-icon">
            <i class="fas fa-leaf"></i>
          </div>
          <h3>Aneka Herbal</h3>
          <p>Suplemen harian</p>
          <span class="category-count">(10 produk)</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ‚úÖ SEMUA PRODUK -->
  <section class="section products-all">
    <div class="container">
      <div class="section-header fade-in">
        <h2 class="section-title">Semua Produk Herbaprima</h2>
		  
	  <!-- ‚úÖ SEARCH BOX BARU -->
  <div class="search-box-container">
    <div class="search-box">
      <i class="fas fa-search"></i>
      <input type="text" id="productSearch" placeholder="Cari nama produk..." />
    </div>
  </div>

		  
        <div class="category-filter">
          <!-- Filter tombol tetap ada untuk kompatibilitas -->
          <button class="filter-btn active" data-category="all">Semua</button>
          <button class="filter-btn" data-category="Madu Premium">Madu Premium</button>
          <button class="filter-btn" data-category="Minuman Sehat">Minuman Sehat</button>
          <button class="filter-btn" data-category="Minyak Herba">Minyak Herba</button>
          <button class="filter-btn" data-category="Aneka Herbal">Aneka Herbal</button>
          <button class="filter-btn" data-category="Perawatan Kulit">Perawatan Kulit</button>
          <button class="filter-btn" data-category="Perawatan Pribadi">Perawatan Pribadi</button>
        </div>
      </div>

      <div class="products-grid" id="productsGrid">
        <!-- Diisi oleh JS -->
      </div>
    </div>
  </section>

  <!-- ‚úÖ PANDUAN PEMILIHAN -->
  <section class="section guide-section">
    <div class="container">
      <h2 class="section-title fade-in">‚ùì Masih Bingung Memilih?</h2>
      <div class="guide-steps">
        <div class="guide-step stagger-item fade-in">
          <div class="step-number">1</div>
          <h3>Tentukan Kebutuhan</h3>
          <p>Imunitas? Pencernaan? Energi harian?</p>
        </div>
        <div class="guide-step stagger-item fade-in">
          <div class="step-number">2</div>
          <h3>Cocokkan dengan Produk</h3>
          <p>Klik kategori ‚Üí lihat manfaat</p>
        </div>
        <div class="guide-step stagger-item fade-in">
          <div class="step-number">3</div>
          <h3>Konsultasi Gratis</h3>
          <a href="https://wa.me/6282241900467?text=Halo%20Herbaprima%2C%20saya%20mau%20konsultasi%20pemilihan%20produk." 
             target="_blank" class="btn btn-whatsapp">
            <i class="fab fa-whatsapp"></i> Chat Sekarang
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-col">
          <img src="https://lh3.googleusercontent.com/d/1xp5ce29F3f-nVa_IEx925L-8YrXXbHo6" alt="Herbaprima" class="footer-logo" />
          <p>Solusi herbal halal, aman, dan edukatif untuk keluarga Indonesia.</p>
        </div>
        <div class="footer-col">
          <h4>Link</h4>
          <ul>
            <li><a href="index.html">Beranda</a></li>
            <li><a href="produk.html">Produk</a></li>
            <li><a href="edukasi.html">Edukasi</a></li>
            <li><a href="tentang.html">Tentang Kami</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Kontak</h4>
          <p>üìû <a href="tel:+6282241900467">0822-4190-0467</a></p>
          <p>üïí Jam Layanan: 08.00‚Äì20.00 WIB</p>
          <a href="https://wa.me/6282241900467" class="btn-whatsapp">üü¢ WhatsApp Kami</a>
        </div>
        <div class="footer-col">
          <h4>Sertifikasi</h4>
          <div class="cert-badges">
            <img src="https://upload.wikimedia.org/wikipedia/id/thumb/0/09/Logo_MUI.svg/1200px-Logo_MUI.svg.png" alt="Halal MUI" class="cert-badge" />
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/BPOM_Logo.svg/1200px-BPOM_Logo.svg.png" alt="BPOM" class="cert-badge" />
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Herbaprima. All rights reserved. | *Produk tidak menggantikan obat dokter.</p>
      </div>
    </div>
  </footer>

  <!-- ‚úÖ FLOATING WHATSAPP BUTTON -->
  <a href="https://wa.me/6282241900467" target="_blank" class="whatsapp-float">
    <i class="fab fa-whatsapp"></i>
  </a>

  <!-- ‚úÖ MODAL DETAIL PRODUK -->
  <div class="modal" id="productModal">
    <div class="modal-content">
      <button class="modal-close" id="modalClose">&times;</button>
      <div class="modal-body" id="modalBody">
        <!-- Diisi oleh JS -->
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="modalClose2">Tutup</button>
      </div>
    </div>
  </div>

<!-- ‚úÖ KERANJANG BOTTOM SHEET (Sudah ada di kode Anda) -->
<div class="cart-panel" id="cartPanel">
  <div class="cart-header">
    <h3>Keranjang Saya</h3>
    <button class="cart-close" id="cartClose">&times;</button>
  </div>
  
  <!-- ‚úÖ WRAPPER KONTEN -->
  <div class="cart-content">
    <div class="cart-items" id="cartItems">
      <!-- Diisi oleh JS -->
    </div>
  </div>
  
  <!-- ‚úÖ FOOTER STICKY (Baru) -->
  <div class="cart-footer-sticky">
    <div class="cart-total-sticky">Total: <span id="cartTotalSticky">Rp0</span></div>
    <a href="https://wa.me/6282241900467" target="_blank" class="btn btn-primary" id="checkoutBtnSticky">
      üì≤ Lanjut ke WhatsApp
    </a>
  </div>
</div>
	
  <div class="cart-overlay" id="cartOverlay"></div>

  <!-- ‚úÖ LOADER SCRIPT -->
  <script>
    // Muat komponen secara dinamis
    async function loadComponents() {
      const header = await fetch('components/header.html').then(r => r.text());
      const footer = await fetch('components/footer.html').then(r => r.text());
      const scripts = await fetch('components/scripts.html').then(r => r.text());
      
      document.getElementById('header-container').innerHTML = header;
      document.getElementById('footer-container').innerHTML = footer;
      document.getElementById('scripts-container').innerHTML = scripts;
      
      // Inisialisasi JS (mobile menu, dll)
      if (typeof initHeader !== 'undefined') initHeader();
    }
    
    // Jalankan saat halaman dimuat
    document.addEventListener('DOMContentLoaded', loadComponents);
  </script>

  <!-- ‚úÖ RENDER PRODUK & KATEGORI -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Render semua produk
      renderProducts('all');

      // Render produk unggulan (3 teratas atau beri tag 'featured')
      const featuredGrid = document.querySelector('.featured-grid');
      if (featuredGrid) {
        // Ambil 3 produk pertama sebagai unggulan
        let productList = JSON.parse(localStorage.getItem('herbaprimaProducts')) || products;
        const featured = productList.slice(0, 3);
        
        featuredGrid.innerHTML = featured.map(product => {
          const priceFormatted = `Rp ${product.price.toLocaleString('id-ID')}`;
          return `
            <div class="product-card featured stagger-item slide-up">
              <span class="badge-top">‚≠ê Unggulan</span>
              <img src="${product.image}" alt="${product.name}" />
              <div class="card-body">
                <h4>${product.name}</h4>
                <div class="price">${priceFormatted}</div>
                <button class="btn btn-outline btn-add" data-id="${product.id}">
                  Pilih Produk
                </button>
              </div>
            </div>
          `;
        }).join('');

        // Event: Pilih Produk ‚Üí modal
        document.querySelectorAll('.btn-add').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const id = e.target.dataset.id;
            const product = productList.find(p => p.id === id);
            if (product) openProductModal(product);
          });
        });
      }

      // Event: Klik card kategori
      document.querySelectorAll('.category-card').forEach(card => {
        card.addEventListener('click', () => {
          const category = card.dataset.category;
          // Update filter buttons
          document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.category === category || (category === 'Semua' && btn.dataset.category === 'all'));
          });
          // Render produk
          renderProducts(category);
          // Scroll ke grid produk
          document.querySelector('.products-all').scrollIntoView({ behavior: 'smooth' });
        });
      });
    });

// ‚úÖ FUNGSI SEARCH PRODUK ‚Äî VERSI DIPERBAIKI
function searchProducts(query) {
  let productList = JSON.parse(localStorage.getItem('herbaprimaProducts')) || products;
  
  if (!query.trim()) {
    // Jika kosong, tampilkan sesuai filter aktif
    const activeFilter = document.querySelector('.filter-btn.active');
    const category = activeFilter ? activeFilter.dataset.category : 'all';
    renderProducts(category === 'all' ? 'all' : category);
    return;
  }

  // Cari di semua produk (abaikan kategori)
  const filtered = productList.filter(product => 
    product.name.toLowerCase().includes(query.toLowerCase()) ||
    product.category.toLowerCase().includes(query.toLowerCase())
  );

  // Render hasil pencarian
  const grid = document.getElementById('productsGrid');
  if (grid) {
    grid.innerHTML = '';
    if (filtered.length === 0) {
      grid.innerHTML = `
        <div class="no-results fade-in">
          <i class="fas fa-search"></i>
          <p>Tidak ditemukan produk dengan kata "<strong>${query}</strong>"</p>
          <button class="btn btn-outline" id="clearSearch">
            <i class="fas fa-times"></i> Hapus Pencarian
          </button>
        </div>
      `;
      // Event: Hapus pencarian
      document.getElementById('clearSearch')?.addEventListener('click', () => {
        document.getElementById('productSearch').value = '';
        searchProducts('');
      });
    } else {
      // ‚úÖ RENDER + LANGSUNG ANIMASI (TANPA TUNGGU SCROLL)
      filtered.forEach((product, index) => {
        const priceFormatted = `Rp ${product.price.toLocaleString('id-ID')}`;
        const card = document.createElement('div');
        card.className = 'product-card stagger-item'; // hapus slide-up sementara
        
        // ‚úÖ Tambahkan visible langsung setelah delay kecil
        setTimeout(() => {
          card.classList.add('visible');
        }, index * 80); // stagger 0.08s per item

        card.innerHTML = `
          <img src="${product.image}" alt="${product.name}" data-id="${product.id}" onError="this.src='https://via.placeholder.com/260x180?text=No+Image'" />
          <div class="card-body">
            <span class="category">${product.category}</span>
            <h4>${product.name}</h4>
            <div class="price">${priceFormatted}</div>
            <button class="btn btn-outline btn-add" data-id="${product.id}">Pilih Produk</button>
          </div>
        `;
        grid.appendChild(card);
      });

      // Event: Pilih Produk ‚Üí modal
      document.querySelectorAll('.btn-add').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const id = e.target.dataset.id;
          const product = productList.find(p => p.id === id);
          if (product) openProductModal(product);
        });
      });

      // Event: Klik gambar ‚Üí modal
      document.querySelectorAll('.product-card img').forEach(img => {
        img.addEventListener('click', (e) => {
          const id = e.target.dataset.id || e.target.closest('.product-card').querySelector('button').dataset.id;
          const product = productList.find(p => p.id === id);
          if (product) openProductModal(product);
        });
      });
    }
  }
}

// ‚úÖ EVENT: Saat Ketik di Search Box
document.getElementById('productSearch')?.addEventListener('input', (e) => {
  searchProducts(e.target.value);
});

// ‚úÖ RESET SEARCH SAAT GANTI FILTER
document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    // Hapus teks pencarian
    document.getElementById('productSearch').value = '';
    
    // Jalankan logika filter seperti biasa
    const category = this.dataset.category;
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    this.classList.add('active');
    renderProducts(category === 'all' ? 'all' : category);
  });
});
  </script>

  <!-- ‚úÖ SCRIPTS -->
  <script src="assets/js/products.js"></script>
  <script src="assets/js/main.js"></script>
</body>
</html>
